import{a as xe}from"./chunk-MBQA5MJZ.js";import{$ as A,A as ae,B as le,C as E,D as L,E as _t,F as b,G as u,H as ce,I as yt,J as F,K as T,L as ye,M as w,N as K,O as G,P as h,Q as d,R as C,S as vt,T as Ct,U as B,V as y,W as _,X as je,Y as We,Z as Le,_ as Mt,a as M,aa as xt,b as P,c as O,ca as Q,d as He,da as At,e as dt,f as ut,fa as bt,g as pt,ga as wt,h as te,ha as Ge,i as Ue,ia as Qe,j as gt,k as mt,ka as ve,l as _e,la as Ce,m as j,ma as Vt,n as N,o as ie,p as W,r as ne,ra as Dt,s as Y,sa as Et,t as re,u as V,ua as Me,v as oe,w as m,wa as It,x as f,y as se,z as ft}from"./chunk-GC2W3DRD.js";var Ae=(()=>{let e=class e{constructor(){this.productSelected=new He(void 0),this.productSelected$=this.productSelected.asObservable(),this.imageCropped=new He(void 0),this.imageCropped$=this.imageCropped.asObservable()}selectProduct(t){this.productSelected.next(t)}cropImage(t){this.imageCropped.next(t)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function wi(r,e){if(r&1){let o=B();h(0,"tr")(1,"div",5)(2,"td"),C(3,"img",6),d(),h(4,"td"),A(5),d()(),h(6,"td",7),se(),h(7,"svg",8),y("click",function(){let i=m(o).$implicit,n=_();return f(n.editProduct(i))}),C(8,"path",9)(9,"path",10),d(),h(10,"svg",11),y("click",function(){let i=m(o).$implicit,n=_();return f(n.deleteProduct(i))}),C(11,"path",12)(12,"path",13),d()()()}if(r&2){let o=e.$implicit;b(3),w("src",o.imagesUrl,L),b(2),xt(o.title)}}var Ot=(()=>{let e=class e{constructor(t,i,n){this.api=t,this.admin=i,this.router=n}ngOnInit(){this.api.getAllProducts().subscribe(t=>this.products=t)}goToProduct(){this.admin.selectProduct(void 0),this.router.navigate(["admin-product"])}deleteProduct(t){t.images?.forEach(i=>this.api.removeImage(i.id).subscribe()),this.api.removeProduct(t.id).subscribe({next:()=>{alert("product has deleted"),this.api.getAllProducts().subscribe(i=>this.products=i)}})}editProduct(t){this.admin.selectProduct(t),this.router.navigate(["admin-product"])}};e.\u0275fac=function(i){return new(i||e)(u(xe),u(Ae),u(Me))},e.\u0275cmp=Y({type:e,selectors:[["app-admin"]],decls:9,vars:1,consts:[[1,"admin"],[1,"admin-head"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 16 16",1,"icon",3,"click"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z"],[4,"ngFor","ngForOf"],[1,"product"],["alt","",3,"src"],[1,"actions"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 16 16",1,"action","edit",3,"click"],["d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 16 16",1,"action","delete",3,"click"],["d","M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"],["d","M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"]],template:function(i,n){i&1&&(h(0,"div",0)(1,"div",1)(2,"p"),A(3,"List of Products"),d(),se(),h(4,"svg",2),y("click",function(){return n.goToProduct()}),C(5,"path",3),d()(),ft(),h(6,"table")(7,"tbody"),T(8,wi,13,2,"tr",4),d()()()),i&2&&(b(8),w("ngForOf",n.products))},dependencies:[ve],styles:[".admin[_ngcontent-%COMP%]   .admin-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:2.6rem;border-bottom:2px solid black}.admin[_ngcontent-%COMP%]   .admin-head[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:1.6rem}.admin[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], .admin[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{width:100%}.admin[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;padding:.2rem 0;border-bottom:1px solid black}.admin[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem}.admin[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:flex;justify-content:left}.admin[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:2.4rem}.admin[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.4rem}.admin[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{height:1.6rem}.admin[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{fill:red}.admin[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{fill:#00f}"]});let r=e;return r})();var Ut=(()=>{let e=class e{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=n=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}};e.\u0275fac=function(i){return new(i||e)(u(ce),u(le))},e.\u0275dir=V({type:e});let r=e;return r})(),Fe=(()=>{let e=class e extends Ut{};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=ae(e)))(n||e)}})(),e.\u0275dir=V({type:e,features:[F]});let r=e;return r})(),ge=new W("");var Vi={provide:ge,useExisting:j(()=>Re),multi:!0};function Di(){let r=Qe()?Qe().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}var Ei=new W(""),Re=(()=>{let e=class e extends Ut{constructor(t,i,n){super(t,i),this._compositionMode=n,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Di())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}};e.\u0275fac=function(i){return new(i||e)(u(ce),u(le),u(Ei,8))},e.\u0275dir=V({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,n){i&1&&y("input",function(a){return n._handleInput(a.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(a){return n._compositionEnd(a.target.value)})},features:[Q([Vi]),F]});let r=e;return r})();function H(r){return r==null||(typeof r=="string"||Array.isArray(r))&&r.length===0}function jt(r){return r!=null&&typeof r.length=="number"}var Wt=new W(""),Lt=new W(""),Ii=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,R=class{static min(e){return Si(e)}static max(e){return Oi(e)}static required(e){return Fi(e)}static requiredTrue(e){return Ri(e)}static email(e){return Pi(e)}static minLength(e){return Ti(e)}static maxLength(e){return ki(e)}static pattern(e){return zi(e)}static nullValidator(e){return Gt(e)}static compose(e){return Kt(e)}static composeAsync(e){return Jt(e)}};function Si(r){return e=>{if(H(e.value)||H(r))return null;let o=parseFloat(e.value);return!isNaN(o)&&o<r?{min:{min:r,actual:e.value}}:null}}function Oi(r){return e=>{if(H(e.value)||H(r))return null;let o=parseFloat(e.value);return!isNaN(o)&&o>r?{max:{max:r,actual:e.value}}:null}}function Fi(r){return H(r.value)?{required:!0}:null}function Ri(r){return r.value===!0?null:{required:!0}}function Pi(r){return H(r.value)||Ii.test(r.value)?null:{email:!0}}function Ti(r){return e=>H(e.value)||!jt(e.value)?null:e.value.length<r?{minlength:{requiredLength:r,actualLength:e.value.length}}:null}function ki(r){return e=>jt(e.value)&&e.value.length>r?{maxlength:{requiredLength:r,actualLength:e.value.length}}:null}function zi(r){if(!r)return Gt;let e,o;return typeof r=="string"?(o="",r.charAt(0)!=="^"&&(o+="^"),o+=r,r.charAt(r.length-1)!=="$"&&(o+="$"),e=new RegExp(o)):(o=r.toString(),e=r),t=>{if(H(t.value))return null;let i=t.value;return e.test(i)?null:{pattern:{requiredPattern:o,actualValue:i}}}}function Gt(r){return null}function Qt(r){return r!=null}function $t(r){return bt(r)?dt(r):r}function qt(r){let e={};return r.forEach(o=>{e=o!=null?M(M({},e),o):e}),Object.keys(e).length===0?null:e}function Xt(r,e){return e.map(o=>o(r))}function Ni(r){return!r.validate}function Yt(r){return r.map(e=>Ni(e)?e:o=>e.validate(o))}function Kt(r){if(!r)return null;let e=r.filter(Qt);return e.length==0?null:function(o){return qt(Xt(o,e))}}function Zt(r){return r!=null?Kt(Yt(r)):null}function Jt(r){if(!r)return null;let e=r.filter(Qt);return e.length==0?null:function(o){let t=Xt(o,e).map($t);return pt(t).pipe(ut(qt))}}function ei(r){return r!=null?Jt(Yt(r)):null}function Ft(r,e){return r===null?[e]:Array.isArray(r)?[...r,e]:[r,e]}function ti(r){return r._rawValidators}function ii(r){return r._rawAsyncValidators}function $e(r){return r?Array.isArray(r)?r:[r]:[]}function Ve(r,e){return Array.isArray(r)?r.includes(e):r===e}function Rt(r,e){let o=$e(e);return $e(r).forEach(i=>{Ve(o,i)||o.push(i)}),o}function Pt(r,e){return $e(e).filter(o=>!Ve(r,o))}var De=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Zt(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ei(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,o){return this.control?this.control.hasError(e,o):!1}getError(e,o){return this.control?this.control.getError(e,o):null}},J=class extends De{get formDirective(){return null}get path(){return null}},pe=class extends De{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ee=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Bi={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Jn=P(M({},Bi),{"[class.ng-submitted]":"isSubmitted"}),ni=(()=>{let e=class e extends Ee{constructor(t){super(t)}};e.\u0275fac=function(i){return new(i||e)(u(pe,2))},e.\u0275dir=V({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,n){i&2&&G("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[F]});let r=e;return r})(),ri=(()=>{let e=class e extends Ee{constructor(t){super(t)}};e.\u0275fac=function(i){return new(i||e)(u(J,10))},e.\u0275dir=V({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,n){i&2&&G("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)("ng-submitted",n.isSubmitted)},features:[F]});let r=e;return r})();var de="VALID",be="INVALID",Z="PENDING",ue="DISABLED";function Ye(r){return(Pe(r)?r.validators:r)||null}function Hi(r){return Array.isArray(r)?Zt(r):r||null}function Ke(r,e){return(Pe(e)?e.asyncValidators:r)||null}function Ui(r){return Array.isArray(r)?ei(r):r||null}function Pe(r){return r!=null&&!Array.isArray(r)&&typeof r=="object"}function oi(r,e,o){let t=r.controls;if(!(e?Object.keys(t):t).length)throw new _e(1e3,"");if(!t[o])throw new _e(1001,"")}function si(r,e,o){r._forEachChild((t,i)=>{if(o[i]===void 0)throw new _e(1002,"")})}var ee=class{constructor(e,o){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(o)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===de}get invalid(){return this.status===be}get pending(){return this.status==Z}get disabled(){return this.status===ue}get enabled(){return this.status!==ue}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Rt(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Rt(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Pt(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Pt(e,this._rawAsyncValidators))}hasValidator(e){return Ve(this._rawValidators,e)}hasAsyncValidator(e){return Ve(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(o=>{o.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Z,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let o=this._parentMarkedDirty(e.onlySelf);this.status=ue,this.errors=null,this._forEachChild(t=>{t.disable(P(M({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(P(M({},e),{skipPristineCheck:o})),this._onDisabledChange.forEach(t=>t(!0))}enable(e={}){let o=this._parentMarkedDirty(e.onlySelf);this.status=de,this._forEachChild(t=>{t.enable(P(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(P(M({},e),{skipPristineCheck:o})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===de||this.status===Z)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(o=>o._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ue:de}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Z,this._hasOwnPendingAsyncValidator=!0;let o=$t(this.asyncValidator(this));this._asyncValidationSubscription=o.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,o={}){this.errors=e,this._updateControlsErrors(o.emitEvent!==!1)}get(e){let o=e;return o==null||(Array.isArray(o)||(o=o.split(".")),o.length===0)?null:o.reduce((t,i)=>t&&t._find(i),this)}getError(e,o){let t=o?this.get(o):this;return t&&t.errors?t.errors[e]:null}hasError(e,o){return!!this.getError(e,o)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new E,this.statusChanges=new E}_calculateStatus(){return this._allControlsDisabled()?ue:this.errors?be:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Z)?Z:this._anyControlsHaveStatus(be)?be:de}_anyControlsHaveStatus(e){return this._anyControls(o=>o.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Pe(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let o=this._parent&&this._parent.dirty;return!e&&!!o&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Hi(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Ui(this._rawAsyncValidators)}},Ie=class extends ee{constructor(e,o,t){super(Ye(o),Ke(t,o)),this.controls=e,this._initObservables(),this._setUpdateStrategy(o),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,o){return this.controls[e]?this.controls[e]:(this.controls[e]=o,o.setParent(this),o._registerOnCollectionChange(this._onCollectionChange),o)}addControl(e,o,t={}){this.registerControl(e,o),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}removeControl(e,o={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}setControl(e,o,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],o&&this.registerControl(e,o),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,o={}){si(this,!0,e),Object.keys(e).forEach(t=>{oi(this,!0,t),this.controls[t].setValue(e[t],{onlySelf:!0,emitEvent:o.emitEvent})}),this.updateValueAndValidity(o)}patchValue(e,o={}){e!=null&&(Object.keys(e).forEach(t=>{let i=this.controls[t];i&&i.patchValue(e[t],{onlySelf:!0,emitEvent:o.emitEvent})}),this.updateValueAndValidity(o))}reset(e={},o={}){this._forEachChild((t,i)=>{t.reset(e?e[i]:null,{onlySelf:!0,emitEvent:o.emitEvent})}),this._updatePristine(o),this._updateTouched(o),this.updateValueAndValidity(o)}getRawValue(){return this._reduceChildren({},(e,o,t)=>(e[t]=o.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(o,t)=>t._syncPendingControls()?!0:o);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(o=>{let t=this.controls[o];t&&e(t,o)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[o,t]of Object.entries(this.controls))if(this.contains(o)&&e(t))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(o,t,i)=>((t.enabled||this.disabled)&&(o[i]=t.value),o))}_reduceChildren(e,o){let t=e;return this._forEachChild((i,n)=>{t=o(t,i,n)}),t}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var qe=class extends Ie{};var ai=new W("CallSetDisabledState",{providedIn:"root",factory:()=>Ze}),Ze="always";function ji(r,e){return[...e.path,r]}function Tt(r,e,o=Ze){Je(r,e),e.valueAccessor.writeValue(r.value),(r.disabled||o==="always")&&e.valueAccessor.setDisabledState?.(r.disabled),Li(r,e),Qi(r,e),Gi(r,e),Wi(r,e)}function kt(r,e,o=!0){let t=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(t),e.valueAccessor.registerOnTouched(t)),Oe(r,e),r&&(e._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function Se(r,e){r.forEach(o=>{o.registerOnValidatorChange&&o.registerOnValidatorChange(e)})}function Wi(r,e){if(e.valueAccessor.setDisabledState){let o=t=>{e.valueAccessor.setDisabledState(t)};r.registerOnDisabledChange(o),e._registerOnDestroy(()=>{r._unregisterOnDisabledChange(o)})}}function Je(r,e){let o=ti(r);e.validator!==null?r.setValidators(Ft(o,e.validator)):typeof o=="function"&&r.setValidators([o]);let t=ii(r);e.asyncValidator!==null?r.setAsyncValidators(Ft(t,e.asyncValidator)):typeof t=="function"&&r.setAsyncValidators([t]);let i=()=>r.updateValueAndValidity();Se(e._rawValidators,i),Se(e._rawAsyncValidators,i)}function Oe(r,e){let o=!1;if(r!==null){if(e.validator!==null){let i=ti(r);if(Array.isArray(i)&&i.length>0){let n=i.filter(s=>s!==e.validator);n.length!==i.length&&(o=!0,r.setValidators(n))}}if(e.asyncValidator!==null){let i=ii(r);if(Array.isArray(i)&&i.length>0){let n=i.filter(s=>s!==e.asyncValidator);n.length!==i.length&&(o=!0,r.setAsyncValidators(n))}}}let t=()=>{};return Se(e._rawValidators,t),Se(e._rawAsyncValidators,t),o}function Li(r,e){e.valueAccessor.registerOnChange(o=>{r._pendingValue=o,r._pendingChange=!0,r._pendingDirty=!0,r.updateOn==="change"&&li(r,e)})}function Gi(r,e){e.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,r.updateOn==="blur"&&r._pendingChange&&li(r,e),r.updateOn!=="submit"&&r.markAsTouched()})}function li(r,e){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function Qi(r,e){let o=(t,i)=>{e.valueAccessor.writeValue(t),i&&e.viewToModelUpdate(t)};r.registerOnChange(o),e._registerOnDestroy(()=>{r._unregisterOnChange(o)})}function $i(r,e){r==null,Je(r,e)}function qi(r,e){return Oe(r,e)}function Xi(r,e){if(!r.hasOwnProperty("model"))return!1;let o=r.model;return o.isFirstChange()?!0:!Object.is(e,o.currentValue)}function Yi(r){return Object.getPrototypeOf(r.constructor)===Fe}function Ki(r,e){r._syncPendingControls(),e.forEach(o=>{let t=o.control;t.updateOn==="submit"&&t._pendingChange&&(o.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function Zi(r,e){if(!e)return null;Array.isArray(e);let o,t,i;return e.forEach(n=>{n.constructor===Re?o=n:Yi(n)?t=n:i=n}),i||t||o||null}function Ji(r,e){let o=r.indexOf(e);o>-1&&r.splice(o,1)}function zt(r,e){let o=r.indexOf(e);o>-1&&r.splice(o,1)}function Nt(r){return typeof r=="object"&&r!==null&&Object.keys(r).length===2&&"value"in r&&"disabled"in r}var we=class extends ee{constructor(e=null,o,t){super(Ye(o),Ke(t,o)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(o),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Pe(o)&&(o.nonNullable||o.initialValueIsDefault)&&(Nt(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,o={}){this.value=this._pendingValue=e,this._onChange.length&&o.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,o.emitViewToModelChange!==!1)),this.updateValueAndValidity(o)}patchValue(e,o={}){this.setValue(e,o)}reset(e=this.defaultValue,o={}){this._applyFormState(e),this.markAsPristine(o),this.markAsUntouched(o),this.setValue(this.value,o),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zt(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zt(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Nt(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var en=r=>r instanceof we;var ci=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=V({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let r=e;return r})(),tn={provide:ge,useExisting:j(()=>et),multi:!0},et=(()=>{let e=class e extends Fe{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=ae(e)))(n||e)}})(),e.\u0275dir=V({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,n){i&1&&y("input",function(a){return n.onChange(a.target.value)})("blur",function(){return n.onTouched()})},features:[Q([tn]),F]});let r=e;return r})();var hi=new W("");var nn={provide:J,useExisting:j(()=>tt)},tt=(()=>{let e=class e extends J{constructor(t,i,n){super(),this.callSetDisabledState=n,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new E,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Oe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return Tt(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){kt(t.control||null,t,!1),Ji(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,Ki(this.form,this.directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,n=this.form.get(t.path);i!==n&&(kt(i||null,t),en(n)&&(Tt(n,t,this.callSetDisabledState),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);$i(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&qi(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Je(this.form,this),this._oldForm&&Oe(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(u(Wt,10),u(Lt,10),u(ai,8))},e.\u0275dir=V({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,n){i&1&&y("submit",function(a){return n.onSubmit(a)})("reset",function(){return n.onReset()})},inputs:{form:[ne.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Q([nn]),F,oe]});let r=e;return r})();var rn={provide:pe,useExisting:j(()=>it)},it=(()=>{let e=class e extends pe{set isDisabled(t){}constructor(t,i,n,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new E,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(n),this.valueAccessor=Zi(this,s)}ngOnChanges(t){this._added||this._setUpControl(),Xi(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return ji(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(u(J,13),u(Wt,10),u(Lt,10),u(ge,10),u(hi,8))},e.\u0275dir=V({type:e,selectors:[["","formControlName",""]],inputs:{name:[ne.None,"formControlName","name"],isDisabled:[ne.None,"disabled","isDisabled"],model:[ne.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Q([rn]),F,oe]});let r=e;return r})(),on={provide:ge,useExisting:j(()=>Te),multi:!0};function di(r,e){return r==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${r}: ${e}`.slice(0,50))}function sn(r){return r.split(":")[0]}var Te=(()=>{let e=class e extends Fe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let i=this._getOptionId(t),n=di(i,t);this.setProperty("value",n)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=sn(t);return this._optionMap.has(i)?this._optionMap.get(i):t}};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=ae(e)))(n||e)}})(),e.\u0275dir=V({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,n){i&1&&y("change",function(a){return n.onChange(a.target.value)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[Q([on]),F]});let r=e;return r})(),ui=(()=>{let e=class e{constructor(t,i,n){this._element=t,this._renderer=i,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(di(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(u(le),u(ce),u(Te,9))},e.\u0275dir=V({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let r=e;return r})(),an={provide:ge,useExisting:j(()=>ke),multi:!0};function Bt(r,e){return r==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${r}: ${e}`.slice(0,50))}function ln(r){return r.split(":")[0]}var ke=(()=>{let e=class e extends Fe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let i;if(Array.isArray(t)){let n=t.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(n.indexOf(a.toString())>-1)}}else i=(n,s)=>{n._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let n=[],s=i.selectedOptions;if(s!==void 0){let a=s;for(let l=0;l<a.length;l++){let c=a[l],g=this._getOptionValue(c.value);n.push(g)}}else{let a=i.options;for(let l=0;l<a.length;l++){let c=a[l];if(c.selected){let g=this._getOptionValue(c.value);n.push(g)}}}this.value=n,t(n)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=ln(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=ae(e)))(n||e)}})(),e.\u0275dir=V({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,n){i&1&&y("change",function(a){return n.onChange(a.target)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[Q([an]),F]});let r=e;return r})(),pi=(()=>{let e=class e{constructor(t,i,n){this._element=t,this._renderer=i,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Bt(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Bt(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(u(le),u(ce),u(ke,9))},e.\u0275dir=V({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let r=e;return r})();var cn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let r=e;return r})(),Xe=class extends ee{constructor(e,o,t){super(Ye(o),Ke(t,o)),this.controls=e,this._initObservables(),this._setUpdateStrategy(o),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,o={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}insert(e,o,t={}){this.controls.splice(e,0,o),this._registerControl(o),this.updateValueAndValidity({emitEvent:t.emitEvent})}removeAt(e,o={}){let t=this._adjustIndex(e);t<0&&(t=0),this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:o.emitEvent})}setControl(e,o,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),o&&(this.controls.splice(i,0,o),this._registerControl(o)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,o={}){si(this,!1,e),e.forEach((t,i)=>{oi(this,!1,i),this.at(i).setValue(t,{onlySelf:!0,emitEvent:o.emitEvent})}),this.updateValueAndValidity(o)}patchValue(e,o={}){e!=null&&(e.forEach((t,i)=>{this.at(i)&&this.at(i).patchValue(t,{onlySelf:!0,emitEvent:o.emitEvent})}),this.updateValueAndValidity(o))}reset(e=[],o={}){this._forEachChild((t,i)=>{t.reset(e[i],{onlySelf:!0,emitEvent:o.emitEvent})}),this._updatePristine(o),this._updateTouched(o),this.updateValueAndValidity(o)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(o=>o._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((o,t)=>t._syncPendingControls()?!0:o,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((o,t)=>{e(o,t)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(o=>o.enabled&&e(o))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function Ht(r){return!!r&&(r.asyncValidators!==void 0||r.validators!==void 0||r.updateOn!==void 0)}var gi=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new e;return t.useNonNullable=!0,t}group(t,i=null){let n=this._reduceControls(t),s={};return Ht(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Ie(n,s)}record(t,i=null){let n=this._reduceControls(t);return new qe(n,i)}control(t,i,n){let s={};return this.useNonNullable?(Ht(i)?s=i:(s.validators=i,s.asyncValidators=n),new we(t,P(M({},s),{nonNullable:!0}))):new we(t,i,n)}array(t,i,n){let s=t.map(a=>this._createControl(a));return new Xe(s,i,n)}_reduceControls(t){let i={};return Object.keys(t).forEach(n=>{i[n]=this._createControl(t[n])}),i}_createControl(t){if(t instanceof we)return t;if(t instanceof ee)return t;if(Array.isArray(t)){let i=t[0],n=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(i,n,s)}else return this.control(t)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var mi=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:[{provide:hi,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:ai,useValue:t.callSetDisabledState??Ze}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[cn]});let r=e;return r})();var dn=["wrapper"],un=["sourceImage"];function pn(r,e){if(r&1){let o=B();h(0,"img",5,1),y("load",function(){m(o);let i=_();return f(i.imageLoadedInView())})("mousedown",function(i){m(o);let n=_();return f(n.startMove(i,n.moveTypes.Drag))})("touchstart",function(i){m(o);let n=_();return f(n.startMove(i,n.moveTypes.Drag))})("error",function(i){m(o);let n=_();return f(n.loadImageError(i))}),d()}if(r&2){let o=_();K("visibility",o.imageVisible?"visible":"hidden")("transform",o.safeTransformStyle),G("ngx-ic-draggable",!o.disabled&&o.allowMoveImage),w("src",o.safeImgDataUrl,L),ye("alt",o.imageAltText)}}function gn(r,e){if(r&1){let o=B();vt(0),h(1,"span",9),y("mousedown",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"topleft"))})("touchstart",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"topleft"))}),C(2,"span",10),d(),h(3,"span",11),C(4,"span",10),d(),h(5,"span",12),y("mousedown",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"topright"))})("touchstart",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"topright"))}),C(6,"span",10),d(),h(7,"span",13),C(8,"span",10),d(),h(9,"span",14),y("mousedown",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"bottomright"))})("touchstart",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"bottomright"))}),C(10,"span",10),d(),h(11,"span",15),C(12,"span",10),d(),h(13,"span",16),y("mousedown",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"bottomleft"))})("touchstart",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"bottomleft"))}),C(14,"span",10),d(),h(15,"span",17),C(16,"span",10),d(),h(17,"span",18),y("mousedown",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"top"))})("touchstart",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"top"))}),d(),h(18,"span",19),y("mousedown",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"right"))})("touchstart",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"right"))}),d(),h(19,"span",20),y("mousedown",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"bottom"))})("touchstart",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"bottom"))}),d(),h(20,"span",21),y("mousedown",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"left"))})("touchstart",function(i){m(o);let n=_(2);return f(n.startMove(i,n.moveTypes.Resize,"left"))}),d(),Ct()}}function mn(r,e){if(r&1){let o=B();h(0,"div",6),y("keydown",function(i){m(o);let n=_();return f(n.keyboardAccess(i))}),h(1,"div",7),y("mousedown",function(i){m(o);let n=_();return f(n.startMove(i,n.moveTypes.Move))})("touchstart",function(i){m(o);let n=_();return f(n.startMove(i,n.moveTypes.Move))}),d(),T(2,gn,21,0,"ng-container",8),d()}if(r&2){let o=_();K("top",o.cropper.y1,"px")("left",o.cropper.x1,"px")("width",o.cropper.x2-o.cropper.x1,"px")("height",o.cropper.y2-o.cropper.y1,"px")("margin-left",o.alignImage==="center"?o.marginLeft:null)("visibility",o.imageVisible?"visible":"hidden"),G("ngx-ic-round",o.roundCropper),ye("aria-label",o.cropperFrameAriaLabel),b(2),w("ngIf",!o.hideResizeSquares)}}var nt=class{constructor(){this.format="png",this.output="blob",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperFrameAriaLabel="Crop photo",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(e){Object.keys(e).filter(o=>o in this).forEach(o=>this[o]=e[o]),this.validateOptions()}setOptionsFromChanges(e){Object.keys(e).filter(o=>o in this).forEach(o=>this[o]=e[o].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}},I=function(r){return r.Drag="drag",r.Move="move",r.Resize="resize",r.Pinch="pinch",r}(I||{});function fn(r){switch(r){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}function _n(r){switch(r){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}function yn(r,e){switch(r){case"ArrowUp":return{clientX:0,clientY:e*-1};case"ArrowRight":return{clientX:e,clientY:0};case"ArrowDown":return{clientX:0,clientY:e};case"ArrowLeft":default:return{clientX:e*-1,clientY:0}}}function vn(r,e,o){let t=r.width,i=r.height;e=Math.round(e),o=Math.round(o);let n=t/e,s=i/o,a=Math.ceil(n/2),l=Math.ceil(s/2),c=r.getContext("2d");if(c){let g=c.getImageData(0,0,t,i),p=c.createImageData(e,o),v=g.data,D=p.data;for(let S=0;S<o;S++)for(let k=0;k<e;k++){let $=(k+S*e)*4,U=S*s,x=0,z=0,rt=0,ot=0,st=0,at=0,lt=0,yi=Math.floor(k*n),vi=Math.floor(S*s),Ne=Math.ceil((k+1)*n),Be=Math.ceil((S+1)*s);Ne=Math.min(Ne,t),Be=Math.min(Be,i);for(let me=vi;me<Be;me++){let ct=Math.abs(U-me)/l,Ci=k*n,Mi=ct*ct;for(let fe=yi;fe<Ne;fe++){let ht=Math.abs(Ci-fe)/a,q=Math.sqrt(Mi+ht*ht);if(q>=1)continue;x=2*q*q*q-3*q*q+1;let X=4*(fe+me*t);lt+=x*v[X+3],rt+=x,v[X+3]<255&&(x=x*v[X+3]/250),ot+=x*v[X],st+=x*v[X+1],at+=x*v[X+2],z+=x}}D[$]=ot/z,D[$+1]=st/z,D[$+2]=at/z,D[$+3]=lt/rt}r.width=e,r.height=o,c.putImageData(p,0,0)}}function fi(r,e){return r/100*e}var Cn=(()=>{let e=class e{crop(t,i,n,s,a){let l=this.getImagePosition(t,i,n,a),c=l.x2-l.x1,g=l.y2-l.y1,p=document.createElement("canvas");p.width=c,p.height=g;let v=p.getContext("2d");if(!v)return null;n.backgroundColor!=null&&(v.fillStyle=n.backgroundColor,v.fillRect(0,0,c,g));let D=(n.transform.scale||1)*(n.transform.flipH?-1:1),S=(n.transform.scale||1)*(n.transform.flipV?-1:1),{translateH:k,translateV:$}=this.getCanvasTranslate(t,n,a),U=t.transformed;v.setTransform(D,0,0,S,U.size.width/2+k,U.size.height/2+$),v.translate(-l.x1/D,-l.y1/S),v.rotate((n.transform.rotate||0)*Math.PI/180),v.drawImage(U.image,-U.size.width/2,-U.size.height/2);let x={width:c,height:g,imagePosition:l,cropperPosition:M({},i)};n.containWithinAspectRatio&&(x.offsetImagePosition=this.getOffsetImagePosition(t,i,n,a));let z=this.getResizeRatio(c,g,n);return z!==1&&(x.width=Math.round(c*z),x.height=n.maintainAspectRatio?Math.round(x.width/n.aspectRatio):Math.round(g*z),vn(p,x.width,x.height)),s==="blob"?this.cropToBlob(x,p,n):(x.base64=p.toDataURL("image/"+n.format,this.getQuality(n)),x)}cropToBlob(t,i,n){return O(this,null,function*(){return t.blob=yield new Promise(s=>i.toBlob(s,"image/"+n.format,this.getQuality(n))),t.blob&&(t.objectUrl=URL.createObjectURL(t.blob)),t})}getCanvasTranslate(t,i,n){if(i.transform.translateUnit==="px"){let s=this.getRatio(t,n);return{translateH:(i.transform.translateH||0)*s,translateV:(i.transform.translateV||0)*s}}else return{translateH:i.transform.translateH?fi(i.transform.translateH,t.transformed.size.width):0,translateV:i.transform.translateV?fi(i.transform.translateV,t.transformed.size.height):0}}getRatio(t,i){return t.transformed.size.width/i.width}getImagePosition(t,i,n,s){let a=this.getRatio(t,s),l={x1:Math.round(i.x1*a),y1:Math.round(i.y1*a),x2:Math.round(i.x2*a),y2:Math.round(i.y2*a)};return n.containWithinAspectRatio||(l.x1=Math.max(l.x1,0),l.y1=Math.max(l.y1,0),l.x2=Math.min(l.x2,t.transformed.size.width),l.y2=Math.min(l.y2,t.transformed.size.height)),l}getOffsetImagePosition(t,i,n,s){let a=n.canvasRotation+t.exifTransform.rotate,l=this.getRatio(t,s),c,g;a%2?(c=(t.transformed.size.width-t.original.size.height)/2,g=(t.transformed.size.height-t.original.size.width)/2):(c=(t.transformed.size.width-t.original.size.width)/2,g=(t.transformed.size.height-t.original.size.height)/2);let p={x1:Math.round(i.x1*l)-c,y1:Math.round(i.y1*l)-g,x2:Math.round(i.x2*l)-c,y2:Math.round(i.y2*l)-g};return n.containWithinAspectRatio||(p.x1=Math.max(p.x1,0),p.y1=Math.max(p.y1,0),p.x2=Math.min(p.x2,t.transformed.size.width),p.y2=Math.min(p.y2,t.transformed.size.height)),p}getResizeRatio(t,i,n){let s=n.resizeToWidth/t,a=n.resizeToHeight/i,l=new Array;n.resizeToWidth>0&&l.push(s),n.resizeToHeight>0&&l.push(a);let c=l.length===0?1:Math.min(...l);return c>1&&!n.onlyScaleDown?c:Math.min(c,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),Mn=(()=>{let e=class e{resetCropperPosition(t,i,n,s){if(t?.nativeElement)if(n.cropperStaticHeight&&n.cropperStaticWidth)i.x1=0,i.x2=s.width>n.cropperStaticWidth?n.cropperStaticWidth:s.width,i.y1=0,i.y2=s.height>n.cropperStaticHeight?n.cropperStaticHeight:s.height;else{let a=Math.min(n.cropperScaledMaxWidth,s.width),l=Math.min(n.cropperScaledMaxHeight,s.height);if(!n.maintainAspectRatio)i.x1=0,i.x2=a,i.y1=0,i.y2=l;else if(s.width/n.aspectRatio<s.height){i.x1=0,i.x2=a;let c=a/n.aspectRatio;i.y1=(s.height-c)/2,i.y2=i.y1+c}else{i.y1=0,i.y2=l;let c=l*n.aspectRatio;i.x1=(s.width-c)/2,i.x2=i.x1+c}}}move(t,i,n){let s=this.getClientX(t)-i.clientX,a=this.getClientY(t)-i.clientY;n.x1=i.x1+s,n.y1=i.y1+a,n.x2=i.x2+s,n.y2=i.y2+a}resize(t,i,n,s,a){let l=this.getClientX(t)-i.clientX,c=this.getClientY(t)-i.clientY;switch(i.position){case"left":n.x1=Math.min(Math.max(i.x1+l,n.x2-a.cropperScaledMaxWidth),n.x2-a.cropperScaledMinWidth);break;case"topleft":n.x1=Math.min(Math.max(i.x1+l,n.x2-a.cropperScaledMaxWidth),n.x2-a.cropperScaledMinWidth),n.y1=Math.min(Math.max(i.y1+c,n.y2-a.cropperScaledMaxHeight),n.y2-a.cropperScaledMinHeight);break;case"top":n.y1=Math.min(Math.max(i.y1+c,n.y2-a.cropperScaledMaxHeight),n.y2-a.cropperScaledMinHeight);break;case"topright":n.x2=Math.max(Math.min(i.x2+l,n.x1+a.cropperScaledMaxWidth),n.x1+a.cropperScaledMinWidth),n.y1=Math.min(Math.max(i.y1+c,n.y2-a.cropperScaledMaxHeight),n.y2-a.cropperScaledMinHeight);break;case"right":n.x2=Math.max(Math.min(i.x2+l,n.x1+a.cropperScaledMaxWidth),n.x1+a.cropperScaledMinWidth);break;case"bottomright":n.x2=Math.max(Math.min(i.x2+l,n.x1+a.cropperScaledMaxWidth),n.x1+a.cropperScaledMinWidth),n.y2=Math.max(Math.min(i.y2+c,n.y1+a.cropperScaledMaxHeight),n.y1+a.cropperScaledMinHeight);break;case"bottom":n.y2=Math.max(Math.min(i.y2+c,n.y1+a.cropperScaledMaxHeight),n.y1+a.cropperScaledMinHeight);break;case"bottomleft":n.x1=Math.min(Math.max(i.x1+l,n.x2-a.cropperScaledMaxWidth),n.x2-a.cropperScaledMinWidth),n.y2=Math.max(Math.min(i.y2+c,n.y1+a.cropperScaledMaxHeight),n.y1+a.cropperScaledMinHeight);break;case"center":let g=t.scale,p=Math.min(Math.max(a.cropperScaledMinWidth,Math.abs(i.x2-i.x1)*g),a.cropperScaledMaxWidth),v=Math.min(Math.max(a.cropperScaledMinHeight,Math.abs(i.y2-i.y1)*g),a.cropperScaledMaxHeight);n.x1=i.clientX-p/2,n.x2=i.clientX+p/2,n.y1=i.clientY-v/2,n.y2=i.clientY+v/2,n.x1<0?(n.x2-=n.x1,n.x1=0):n.x2>s.width&&(n.x1-=n.x2-s.width,n.x2=s.width),n.y1<0?(n.y2-=n.y1,n.y1=0):n.y2>s.height&&(n.y1-=n.y2-s.height,n.y2=s.height);break}a.maintainAspectRatio&&this.checkAspectRatio(i.position,n,s,a)}checkAspectRatio(t,i,n,s){let a=0,l=0;switch(t){case"top":i.x2=i.x1+(i.y2-i.y1)*s.aspectRatio,a=Math.max(i.x2-n.width,0),l=Math.max(0-i.y1,0),(a>0||l>0)&&(i.x2-=l*s.aspectRatio>a?l*s.aspectRatio:a,i.y1+=l*s.aspectRatio>a?l:a/s.aspectRatio);break;case"bottom":i.x2=i.x1+(i.y2-i.y1)*s.aspectRatio,a=Math.max(i.x2-n.width,0),l=Math.max(i.y2-n.height,0),(a>0||l>0)&&(i.x2-=l*s.aspectRatio>a?l*s.aspectRatio:a,i.y2-=l*s.aspectRatio>a?l:a/s.aspectRatio);break;case"topleft":i.y1=i.y2-(i.x2-i.x1)/s.aspectRatio,a=Math.max(0-i.x1,0),l=Math.max(0-i.y1,0),(a>0||l>0)&&(i.x1+=l*s.aspectRatio>a?l*s.aspectRatio:a,i.y1+=l*s.aspectRatio>a?l:a/s.aspectRatio);break;case"topright":i.y1=i.y2-(i.x2-i.x1)/s.aspectRatio,a=Math.max(i.x2-n.width,0),l=Math.max(0-i.y1,0),(a>0||l>0)&&(i.x2-=l*s.aspectRatio>a?l*s.aspectRatio:a,i.y1+=l*s.aspectRatio>a?l:a/s.aspectRatio);break;case"right":case"bottomright":i.y2=i.y1+(i.x2-i.x1)/s.aspectRatio,a=Math.max(i.x2-n.width,0),l=Math.max(i.y2-n.height,0),(a>0||l>0)&&(i.x2-=l*s.aspectRatio>a?l*s.aspectRatio:a,i.y2-=l*s.aspectRatio>a?l:a/s.aspectRatio);break;case"left":case"bottomleft":i.y2=i.y1+(i.x2-i.x1)/s.aspectRatio,a=Math.max(0-i.x1,0),l=Math.max(i.y2-n.height,0),(a>0||l>0)&&(i.x1+=l*s.aspectRatio>a?l*s.aspectRatio:a,i.y2-=l*s.aspectRatio>a?l:a/s.aspectRatio);break;case"center":i.x2=i.x1+(i.y2-i.y1)*s.aspectRatio,i.y2=i.y1+(i.x2-i.x1)/s.aspectRatio;let c=Math.max(0-i.x1,0),g=Math.max(i.x2-n.width,0),p=Math.max(i.y2-n.height,0),v=Math.max(0-i.y1,0);(c>0||g>0||p>0||v>0)&&(i.x1+=p*s.aspectRatio>c?p*s.aspectRatio:c,i.x2-=v*s.aspectRatio>g?v*s.aspectRatio:g,i.y1+=v*s.aspectRatio>g?v:g/s.aspectRatio,i.y2-=p*s.aspectRatio>c?p:c/s.aspectRatio);break}}getClientX(t){return"touches"in t&&t.touches[0]?t.touches[0].clientX:"clientX"in t?t.clientX:0}getClientY(t){return"touches"in t&&t.touches[0]?t.touches[0].clientY:"clientX"in t?t.clientY:0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),xn="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==";function An(){return new Promise(r=>{let e=new Image;e.onload=()=>{let o=e.width===1&&e.height===2;r(o)},e.src=xn})}function bn(r){switch(typeof r=="object"&&(r=wn(r)),r){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}function wn(r){let e=new DataView(r);if(e.getUint16(0,!1)!==65496)return-2;let o=e.byteLength,t=2;for(;t<o;){if(e.getUint16(t+2,!1)<=8)return-1;let i=e.getUint16(t,!1);if(t+=2,i==65505){if(e.getUint32(t+=2,!1)!==1165519206)return-1;let n=e.getUint16(t+=6,!1)==18761;t+=e.getUint32(t+4,n);let s=e.getUint16(t,n);t+=2;for(let a=0;a<s;a++)if(e.getUint16(t+a*12,n)==274)return e.getUint16(t+a*12+8,n)}else{if((i&65280)!==65280)break;t+=e.getUint16(t,!1)}}return-1}var Vn=(()=>{let e=class e{constructor(){this.autoRotateSupported=An()}loadImageFile(t,i){return O(this,null,function*(){let n=yield t.arrayBuffer();return yield this.checkImageTypeAndLoadImageFromArrayBuffer(n,t.type,i)})}checkImageTypeAndLoadImageFromArrayBuffer(t,i,n){return this.isValidImageType(i)?this.loadImageFromArrayBuffer(t,n,i):Promise.reject(new Error("Invalid image type"))}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|svg|webp|x-icon|vnd.microsoft.icon)/.test(t)}loadImageFromURL(t,i){return O(this,null,function*(){let s=yield(yield fetch(t)).blob(),a=yield s.arrayBuffer();return yield this.loadImageFromArrayBuffer(a,i,s.type)})}loadBase64Image(t,i){let n=this.base64ToArrayBuffer(t);return this.loadImageFromArrayBuffer(n,i)}base64ToArrayBuffer(t){t=t.replace(/^data:([^;]+);base64,/gmi,"");let i=atob(t),n=i.length,s=new Uint8Array(n);for(let a=0;a<n;a++)s[a]=i.charCodeAt(a);return s.buffer}loadImageFromArrayBuffer(t,i,n){return O(this,null,function*(){let s=yield new Promise((a,l)=>O(this,null,function*(){try{let c=new Blob([t],n?{type:n}:void 0),g=URL.createObjectURL(c),p=new Image,D=n==="image/svg+xml"?yield this.getSvgImageSize(c):void 0;p.onload=()=>a({originalImage:p,originalImageSize:D,originalObjectUrl:g,originalArrayBuffer:t}),p.onerror=l,p.src=g}catch(c){l(c)}}));return yield this.transformImageFromArrayBuffer(s,i,s.originalImageSize!=null)})}getSvgImageSize(t){return O(this,null,function*(){let s=new DOMParser().parseFromString(yield t.text(),"image/svg+xml").querySelector("svg");if(!s)throw Error("Failed to parse SVG image");let a=s.getAttribute("width"),l=s.getAttribute("height");if(a&&l)return null;let c=s.getAttribute("viewBox")||s.getAttribute("viewbox");if(c){let g=c.split(" ");return{width:+g[2],height:+g[3]}}throw Error("Failed to load SVG image. SVG must have width + height or viewBox definition.")})}transformImageFromArrayBuffer(t,i,n=!1){return O(this,null,function*(){let s=yield this.autoRotateSupported,a=bn(s?-1:t.originalArrayBuffer);if(!t.originalImage||!t.originalImage.complete)return Promise.reject(new Error("No image loaded"));let l={original:{objectUrl:t.originalObjectUrl,image:t.originalImage,size:t.originalImageSize??{width:t.originalImage.naturalWidth,height:t.originalImage.naturalHeight}},exifTransform:a};return this.transformLoadedImage(l,i,n)})}transformLoadedImage(t,i,n=!1){return O(this,null,function*(){let s=i.canvasRotation+t.exifTransform.rotate,a=t.original.size;if(!n&&s===0&&!t.exifTransform.flip&&!i.containWithinAspectRatio)return{original:{objectUrl:t.original.objectUrl,image:t.original.image,size:M({},a)},transformed:{objectUrl:t.original.objectUrl,image:t.original.image,size:M({},a)},exifTransform:t.exifTransform};let l=this.getTransformedSize(a,t.exifTransform,i),c=document.createElement("canvas");c.width=l.width,c.height=l.height;let g=c.getContext("2d");g?.setTransform(t.exifTransform.flip?-1:1,0,0,1,c.width/2,c.height/2),g?.rotate(Math.PI*(s/2)),g?.drawImage(t.original.image,-a.width/2,-a.height/2);let p=yield new Promise(S=>c.toBlob(S,i.format));if(!p)throw new Error("Failed to get Blob for transformed image.");let v=URL.createObjectURL(p),D=yield this.loadImageFromObjectUrl(v);return{original:{objectUrl:t.original.objectUrl,image:t.original.image,size:M({},a)},transformed:{objectUrl:v,image:D,size:{width:D.width,height:D.height}},exifTransform:t.exifTransform}})}loadImageFromObjectUrl(t){return new Promise((i,n)=>{let s=new Image;s.onload=()=>i(s),s.onerror=n,s.src=t})}getTransformedSize(t,i,n){let s=n.canvasRotation+i.rotate;if(n.containWithinAspectRatio)if(s%2){let a=t.width*n.aspectRatio,l=t.height/n.aspectRatio;return{width:Math.max(t.height,a),height:Math.max(t.width,l)}}else{let a=t.height*n.aspectRatio,l=t.width/n.aspectRatio;return{width:Math.max(t.width,a),height:Math.max(t.height,l)}}return s%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),ze=(()=>{let e=class e{constructor(t,i,n,s,a,l,c){this.cropService=t,this.cropperPositionService=i,this.loadImageService=n,this.sanitizer=s,this.cd=a,this.zone=l,this.hammerLoader=c,this.settings=new nt,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=I,this.imageVisible=!1,this.cropperFrameAriaLabel=this.settings.cropperFrameAriaLabel,this.output=this.settings.output,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new E,this.startCropImage=new E,this.imageLoaded=new E,this.cropperReady=new E,this.loadImageFailed=new E,this.transformChange=new E,this.reset()}ngOnChanges(t){this.onChangesUpdateSettings(t),this.onChangesInputImage(t),this.loadedImage?.original.image.complete&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i)),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.maintainAspectRatio&&(this.resetCropOnAspectRatioChange||!this.aspectRatioIsCorrect())&&(t.maintainAspectRatio||t.aspectRatio)?this.resetCropperPosition():t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop())),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop()),t.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&(this.hideResizeSquares=!0,this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1}))}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){let t=this.imageChangedEvent?.target?.files;return t instanceof FileList&&t.length>0}setCssTransform(){let t=this.transform?.translateUnit||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${t}, ${this.transform.translateV||0}${t}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){this.loadImageService.loadImageFile(t,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}setLoadedImage(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.objectUrl),this.cd.markForCheck()}loadImageError(t){console.error(t),this.loadImageFailed.emit()}imageLoadedInView(){this.loadedImage!=null&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(M({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>0}onResize(){if(this.loadedImage)if(this.hidden)this.resizedWhileHidden=!0;else{let t=M({},this.maxSize);this.setMaxSize(),this.resizeCropperPosition(t),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()}}activatePinchGesture(){return O(this,null,function*(){yield this.hammerLoader?.();let t=window?.Hammer||null;if(t){let i=new t(this.wrapper.nativeElement);i.get("pinch").set({enable:!0}),i.on("pinchmove",this.onPinch.bind(this)),i.on("pinchend",this.pinchStop.bind(this)),i.on("pinchstart",this.startPinch.bind(this))}else wt()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")})}resizeCropperPosition(t){(t.width!==this.maxSize.width||t.height!==this.maxSize.height)&&(this.cropper.x1=this.cropper.x1*this.maxSize.width/t.width,this.cropper.x2=this.cropper.x2*this.maxSize.width/t.width,this.cropper.y1=this.cropper.y1*this.maxSize.height/t.height,this.cropper.y2=this.cropper.y2*this.maxSize.height/t.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings,this.maxSize),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){let i=+t.key;i>=1&&i<=9&&(this.settings.stepSize=i)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;let n=t.shiftKey?I.Resize:I.Move,s=t.altKey?_n(t.key):fn(t.key),a=yn(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},n,s),this.handleMouseMove(a),this.handleMouseUp()}startMove(t,i,n=null){this.disabled||this.moveStart?.active&&this.moveStart?.type===I.Pinch||i===I.Drag&&!this.allowMoveImage||("preventDefault"in t&&t.preventDefault(),this.moveStart=M({active:!0,type:i,position:n,transform:M({},this.transform),clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t)},this.cropper),this.initMouseMove())}initMouseMove(){Ue(te(document,"mousemove"),te(document,"touchmove")).pipe(mt(Ue(te(document,"mouseup"),te(document,"touchend")).pipe(gt()))).subscribe({next:t=>this.zone.run(()=>{this.handleMouseMove(t),this.cd.markForCheck()}),complete:()=>this.zone.run(()=>{this.handleMouseUp(),this.cd.markForCheck()})})}startPinch(t){this.safeImgDataUrl&&(t.preventDefault&&t.preventDefault(),this.moveStart=M({active:!0,type:I.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}handleMouseMove(t){if(this.moveStart.active){if("stopPropagation"in t&&t.stopPropagation(),"preventDefault"in t&&t.preventDefault(),this.moveStart.type===I.Move)this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===I.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===I.Drag){let i=this.cropperPositionService.getClientX(t)-this.moveStart.clientX,n=this.cropperPositionService.getClientY(t)-this.moveStart.clientY;this.transform=P(M({},this.transform),{translateH:(this.moveStart.transform?.translateH||0)+i,translateV:(this.moveStart.transform?.translateV||0)+n}),this.setCssTransform()}}}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===I.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.markForCheck())}setMaxSize(){if(this.sourceImage){let t=getComputedStyle(this.sourceImage.nativeElement);this.maxSize.width=parseFloat(t.width),this.maxSize.height=parseFloat(t.height),this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage?.transformed?.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.maintainAspectRatio?this.settings.cropperScaledMinHeight=Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?this.settings.cropperScaledMinHeight=Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):this.settings.cropperScaledMinHeight=20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed?.image){let t=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/t:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/t:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}handleMouseUp(){this.moveStart.active&&(this.moveStart.active=!1,this.moveStart?.type===I.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(t=this.settings.output){if(this.loadedImage?.transformed?.image!=null){if(this.startCropImage.emit(),t==="blob")return this.cropToBlob();if(t==="base64")return this.cropToBase64()}return null}cropToBlob(){return new Promise((t,i)=>this.zone.run(()=>O(this,null,function*(){let n=yield this.cropService.crop(this.loadedImage,this.cropper,this.settings,"blob",this.maxSize);n?(this.imageCropped.emit(n),t(n)):i("Crop image failed")})))}cropToBase64(){let t=this.cropService.crop(this.loadedImage,this.cropper,this.settings,"base64",this.maxSize);return t?(this.imageCropped.emit(t),t):null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}};e.\u0275fac=function(i){return new(i||e)(u(Cn),u(Mn),u(Vn),u(Et),u(Ge),u(yt),u(Dt,8))},e.\u0275cmp=Y({type:e,selectors:[["image-cropper"]],viewQuery:function(i,n){if(i&1&&(je(dn,7),je(un,5)),i&2){let s;We(s=Le())&&(n.wrapper=s.first),We(s=Le())&&(n.sourceImage=s.first)}},hostVars:6,hostBindings:function(i,n){i&1&&y("resize",function(){return n.onResize()},!1,_t),i&2&&(K("text-align",n.alignImage),G("disabled",n.disabled)("ngx-ix-hidden",n.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",cropperFrameAriaLabel:"cropperFrameAriaLabel",output:"output",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},standalone:!0,features:[oe,At],decls:5,vars:10,consts:[["wrapper",""],["sourceImage",""],["class","ngx-ic-source-image","role","presentation",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],["role","presentation",1,"ngx-ic-source-image",3,"load","mousedown","touchstart","error","src"],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],["role","presentation",1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(i,n){i&1&&(h(0,"div",null,0),T(2,pn,2,8,"img",2),C(3,"div",3),T(4,mn,3,16,"div",4),d()),i&2&&(K("background",n.imageVisible&&n.backgroundColor),b(2),w("ngIf",n.safeImgDataUrl),b(),K("width",n.maxSize.width,"px")("height",n.maxSize.height,"px")("margin-left",n.alignImage==="center"?n.marginLeft:null),b(),w("ngIf",n.imageVisible))},dependencies:[Ce],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0});let r=e;return r})();function En(r,e){if(r&1&&C(0,"img",34),r&2){let o=e.$implicit;w("src",o,L)}}function In(r,e){if(r&1&&(h(0,"div",29),T(1,En,1,1,"img",30),se(),h(2,"svg",31),C(3,"path",32)(4,"path",33),d()()),r&2){let o=_();b(),w("ngForOf",o.product==null?null:o.product.imagesUrl)}}function Sn(r,e){if(r&1&&(h(0,"div",29),C(1,"img",35),d()),r&2){let o=_();b(),w("src",o.croppedImageUrl,L)}}var _i=(()=>{let e=class e{constructor(t,i,n,s){this.fb=t,this.api=i,this.router=n,this.admin=s,this.height=546,this.width=364,this.aspectRatio=this.width/this.height,this.imageChangedEvent=null,this.productForm=this.fb.group({gender:[null,R.required],brand:[null,R.required],category:[null,R.required],title:[null,R.required],colors:[null,R.required],sizes:[null,R.required],price:[null,R.required],priceAfterDiscount:[null]})}ngOnInit(){this.admin.productSelected$.subscribe(t=>{this.product=t,this.productForm.patchValue({gender:t?.gender,brand:t?.brand,category:t?.category,title:t?.title,colors:t?.colors,sizes:t?.sizes,price:t?.price,priceAfterDiscount:t?.priceAfterDiscount})}),this.admin.imageCropped$.subscribe(t=>{console.log(t),this.croppedImage=t})}onSubmit(){this.product?(console.log("edit"),this.api.editProduct(this.product.id,this.product)):(console.log("add"),this.api.addProduct(this.productForm.value).subscribe({next:t=>{alert("added"),this.api.uploadImage(this.croppedImage,t.id).subscribe({next:()=>alert("image uploaded")})},error:()=>alert("error")}))}fileChangeEvent(t){this.imageChangedEvent=t}imageCropped(t){this.croppedImage=t.blob,this.croppedImageUrl=t.objectUrl}addImage(){this.router.navigate(["/admin-image"])}deleteImage(t){this.api.removeImage(t)}};e.\u0275fac=function(i){return new(i||e)(u(gi),u(xe),u(Me),u(Ae))},e.\u0275cmp=Y({type:e,selectors:[["app-admin-product"]],decls:45,vars:10,consts:[["inputField",""],[1,"admin-product"],[3,"formGroup"],["formControlName","gender"],["value","WOMEN"],["value","MEN"],["type","text","placeholder","Brand","formControlName","brand"],["type","text","placeholder","Category","formControlName","category"],["type","text","placeholder","Title","formControlName","title"],["formControlName","colors","multiple",""],["value","black"],["value","white"],["value","blue"],["value","red"],["formControlName","sizes","multiple",""],["value","XS"],["value","S"],["value","M"],["value","L"],["value","XL"],["value","XXL"],["type","number","placeholder","Price","formControlName","price"],["type","number","placeholder","Price After Discount","formControlName","priceAfterDiscount"],[1,"images"],["class","image",4,"ngIf"],[1,"image","image-add",3,"click"],["type","file","accept","image/*","hidden","",3,"change"],["format","jpeg",3,"imageCropped","imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToHeight","resizeToWidth"],["type","submit",3,"click","disabled","value"],[1,"image"],["alt","",3,"src",4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 16 16",1,"delete"],["d","M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"],["d","M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"],["alt","",3,"src"],[3,"src"]],template:function(i,n){if(i&1){let s=B();h(0,"h1"),A(1,"Add Product"),d(),h(2,"div",1)(3,"form",2)(4,"select",3)(5,"option",4),A(6,"WOMEN"),d(),h(7,"option",5),A(8,"MEN"),d()(),C(9,"input",6)(10,"input",7)(11,"input",8),h(12,"select",9)(13,"option",10),A(14,"Black"),d(),h(15,"option",11),A(16,"White"),d(),h(17,"option",12),A(18,"Blue"),d(),h(19,"option",13),A(20,"Red"),d()(),h(21,"select",14)(22,"option",15),A(23,"XS"),d(),h(24,"option",16),A(25,"S"),d(),h(26,"option",17),A(27,"M"),d(),h(28,"option",18),A(29,"L"),d(),h(30,"option",19),A(31,"XL"),d(),h(32,"option",20),A(33,"XXL"),d()(),C(34,"input",21)(35,"input",22),h(36,"div",23),T(37,In,5,1,"div",24)(38,Sn,2,1,"div",24),h(39,"div",25),y("click",function(){m(s);let l=Mt(42);return f(l.click())}),A(40,"+"),d()(),h(41,"input",26,0),y("change",function(l){return m(s),f(n.fileChangeEvent(l))}),d(),h(43,"image-cropper",27),y("imageCropped",function(l){return m(s),f(n.imageCropped(l))}),d(),h(44,"input",28),y("click",function(){return m(s),f(n.onSubmit())}),d()()()}i&2&&(b(3),w("formGroup",n.productForm),b(34),w("ngIf",n.product==null?null:n.product.imagesUrl),b(),w("ngIf",n.croppedImageUrl),b(5),w("imageChangedEvent",n.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",n.aspectRatio)("resizeToHeight",n.height)("resizeToWidth",n.width),b(),w("disabled",!(n.productForm.valid&&n.croppedImageUrl))("value",n.product?"EDIT":"ADD"))},dependencies:[ci,ui,pi,Re,et,Te,ke,ni,ri,tt,it,ve,Ce,ze],styles:[".admin-product[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.6rem}.admin-product[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .admin-product[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.2rem 1rem;width:100%}.admin-product[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);width:100%;gap:.2rem}.admin-product[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:relative}.admin-product[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.admin-product[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{fill:red;position:absolute;height:1rem;bottom:0;right:0}.admin-product[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image-add[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:4rem;width:100%;background-color:#d3d3d3}"]});let r=e;return r})();var On=[{path:"admin",component:Ot},{path:"admin-product",component:_i}],Dr=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[It.forChild(On),mi,Vt,ze]});let r=e;return r})();export{Dr as AdminModule};
